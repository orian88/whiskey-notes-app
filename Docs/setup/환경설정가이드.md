# 환경 설정 가이드

## 개발 환경 설정

### 1. Node.js 설치
- **버전**: Node.js 18+ (LTS 권장)
- **다운로드**: [Node.js 공식 사이트](https://nodejs.org/)
- **설치 확인**: `node --version`, `npm --version`

### 2. Git 설치 및 설정
- **다운로드**: [Git 공식 사이트](https://git-scm.com/)
- **설정**:
  ```bash
  git config --global user.name "Your Name"
  git config --global user.email "your.email@example.com"
  ```

### 3. VS Code 설치 및 확장팩
- **다운로드**: [VS Code 공식 사이트](https://code.visualstudio.com/)
- **필수 확장팩**:
  - ES7+ React/Redux/React-Native snippets
  - Tailwind CSS IntelliSense
  - TypeScript Importer
  - Prettier - Code formatter
  - ESLint
  - Auto Rename Tag
  - GitLens

### 4. 프로젝트 생성
```bash
# 프로젝트 생성
npm create vite@latest whiskey-notes-app -- --template react-ts
cd whiskey-notes-app

# 의존성 설치
npm install

# 개발 서버 실행
npm run dev
```

### 5. 추가 패키지 설치
```bash
# UI 및 스타일링
npm install tailwindcss @headlessui/react @heroicons/react

# 상태 관리
npm install zustand

# 라우팅
npm install react-router-dom

# 데이터베이스
npm install @supabase/supabase-js

# 리치 텍스트 에디터
npm install @tiptap/react @tiptap/starter-kit

# 차트
npm install recharts

# 날짜 처리
npm install date-fns

# 개발 도구
npm install -D @types/node
```

### 6. Tailwind CSS 설정
```bash
# Tailwind CSS 설치
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### 7. 환경 변수 설정
`.env.local` 파일 생성:
```
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## Supabase 설정

### 1. 계정 생성
- [Supabase 공식 사이트](https://supabase.com/)에서 계정 생성
- 새 프로젝트 생성

### 2. 데이터베이스 스키마 생성
SQL 에디터에서 다음 스크립트 실행:

```sql
-- 위스키 정보 테이블
CREATE TABLE whiskeys (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  brand VARCHAR(255),
  type VARCHAR(100),
  age INTEGER,
  bottle_volume INTEGER,
  abv DECIMAL(4,2),
  region VARCHAR(255),
  price DECIMAL(10,2),
  distillery VARCHAR(255),
  description TEXT,
  cask VARCHAR(255),
  image_url VARCHAR(500),
  ref_url VARCHAR(500),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 구매 정보 테이블
CREATE TABLE purchases (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  whiskey_id UUID REFERENCES whiskeys(id) ON DELETE CASCADE,
  purchase_date DATE,
  purchase_price DECIMAL(10,2),
  store_name VARCHAR(255),
  store_location VARCHAR(255),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 테이스팅 노트 테이블
CREATE TABLE tasting_notes (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  whiskey_id UUID REFERENCES whiskeys(id) ON DELETE CASCADE,
  tasting_date DATE,
  color VARCHAR(100),
  nose TEXT,
  palate TEXT,
  finish TEXT,
  rating INTEGER CHECK (rating >= 1 AND rating <= 10),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 개인 노트 테이블
CREATE TABLE personal_notes (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  content TEXT,
  category VARCHAR(100),
  tags TEXT[],
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLS 정책 설정
ALTER TABLE whiskeys ENABLE ROW LEVEL SECURITY;
ALTER TABLE purchases ENABLE ROW LEVEL SECURITY;
ALTER TABLE tasting_notes ENABLE ROW LEVEL SECURITY;
ALTER TABLE personal_notes ENABLE ROW LEVEL SECURITY;

-- 모든 테이블에 대한 정책 (개인용이므로 모든 접근 허용)
CREATE POLICY "Allow all operations" ON whiskeys FOR ALL USING (true);
CREATE POLICY "Allow all operations" ON purchases FOR ALL USING (true);
CREATE POLICY "Allow all operations" ON tasting_notes FOR ALL USING (true);
CREATE POLICY "Allow all operations" ON personal_notes FOR ALL USING (true);
```

### 3. Storage 설정
- Storage 탭에서 새 버킷 생성
- 버킷명: `whiskey-images`
- 공개 버킷으로 설정

## Vercel 배포 설정

### 1. Vercel 계정 생성
- [Vercel 공식 사이트](https://vercel.com/)에서 계정 생성
- GitHub 계정 연결

### 2. 프로젝트 배포
```bash
# Vercel CLI 설치
npm install -g vercel

# 프로젝트 배포
vercel

# 환경 변수 설정
vercel env add VITE_SUPABASE_URL
vercel env add VITE_SUPABASE_ANON_KEY
```

### 3. 자동 배포 설정
- GitHub 저장소와 Vercel 프로젝트 연결
- main 브랜치에 푸시 시 자동 배포 설정

## 개발 서버 실행

### 1. 로컬 개발 서버
```bash
npm run dev
```

### 2. 빌드
```bash
npm run build
```

### 3. 프리뷰
```bash
npm run preview
```

## 문제 해결

### 일반적인 문제들
1. **Node.js 버전 문제**: nvm 사용 권장
2. **포트 충돌**: 다른 포트 사용 (`npm run dev -- --port 3001`)
3. **의존성 문제**: `node_modules` 삭제 후 `npm install` 재실행
4. **Supabase 연결 문제**: 환경 변수 확인

### 유용한 명령어
```bash
# 패키지 업데이트
npm update

# 캐시 정리
npm cache clean --force

# 의존성 확인
npm audit

# 빌드 최적화
npm run build -- --mode production
```
